(this["webpackJsonpmeal-prep-react"]=this["webpackJsonpmeal-prep-react"]||[]).push([[0],{120:function(e){e.exports=JSON.parse('{"a":["African","American","British","Cajun","Caribbean","Chinese","Eastern European","European","French","German","Greek","Indian","Irish","Italian","Japanese","Jewish","Korean","Latin American","Mediterranean","Mexican","Middle Eastern","Nordic","Southern","Spanish","Thai","Vietnamese"]}')},125:function(e,t,n){e.exports=n(220)},130:function(e,t,n){},220:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(23),c=n.n(i),o=(n(130),n(11)),l=n.n(o),s=n(15),u=n(10),p=n(231),m=n(235),d=n(236),f=n(45),g=n(230),h=n(39),x=r.a.createContext({loggedIn:!1,user:{},handleLogin:function(){}}),y=n(62),E=n.n(y),b=E.a.create({baseURL:"https://api.spoonacular.com/recipes/complexSearch",timeout:5e4}),v=E.a.create({baseURL:"http://localhost:3000/api/auth",timeout:5e4,withCredentials:!0}),C=E.a.create({baseURL:"http://localhost:3000/api/plans",timeout:5e4}),w=E.a.create({baseURL:"http://localhost:3000/api/recipes",timeout:5e4});function S(){var e=Object(a.useContext)(x),t=function(){v.get("/logout").then((function(e){return{success:!0,message:"Logged out Successfully",data:e.data}})).catch((function(e){return{success:!1,message:e,data:e}})).then((function(t){e.handleLogin(t.success)}))};return e.loggedIn?r.a.createElement(m.a,{collapseOnSelect:!0,bg:"light",expand:"lg",className:"navbar",style:O.navbar},r.a.createElement(h.LinkContainer,{to:"/"},r.a.createElement(m.a.Brand,null,"Preppy")),r.a.createElement(m.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(m.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(d.a,{className:"ml-auto"},r.a.createElement(h.LinkContainer,{to:"/"},r.a.createElement(d.a.Link,null,"Create Plan")),r.a.createElement(h.LinkContainer,{to:"/all"},r.a.createElement(d.a.Link,null,"View All Plans")),r.a.createElement(f.a,{variant:"outline-primary",onClick:function(){return t()}},"Logout")))):r.a.createElement(m.a,{bg:"light",expand:"lg",className:"navbar",style:O.navbar},r.a.createElement(h.LinkContainer,{to:"/home"},r.a.createElement(m.a.Brand,null,"Preppy")),r.a.createElement(m.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(m.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(d.a,{className:"ml-auto"},r.a.createElement(g.a,{title:"Account",id:"basic-nav-dropdown"},r.a.createElement(h.LinkContainer,{to:"/login"},r.a.createElement(g.a.Item,null,"Login")),r.a.createElement(h.LinkContainer,{to:"/signup"},r.a.createElement(g.a.Item,null,"Sign Up")),r.a.createElement(g.a.Divider,null)))))}var O={navbar:{opacity:".9",background:"#EDF5FC"}};function j(e){return r.a.createElement(f.a,{variant:"primary",size:"lg",block:!0,style:k.createButton},e.text)}var k={createButton:{width:"100%"}},D=n(22);function T(){var e=Object(a.useContext)(x);return Object(a.useEffect)((function(){console.log("this is our current user: ",e.user)}),[e.user]),r.a.createElement(p.a,{style:I.formContainer},r.a.createElement("p",{style:I.p},"Hello, welcome to Prepper. This tool will let you select the recipes that you'd like to cook throughout the week, and generate a  prep plan for you based on your availablity each day."),r.a.createElement("p",{style:I.p},"Click 'Create Plan' to start creating your perfect meal plan."),r.a.createElement(D.NavLink,{to:"/create"},r.a.createElement(j,{text:"Create Plan"})))}var I={p:{textAlign:"center",color:"white"},formContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"400px"}},B=n(41),N=n(50),L=n(60),R=n.n(L);n(105);function A(e){return r.a.createElement(f.a,{variant:"primary",size:"sm",block:!0,onClick:function(t){return e.onClick(t)},style:J.createButton},e.text)}var J={createButton:{width:"15%",margin:"15px"}};function M(e){var t=Object(a.useState)(new Date),n=Object(u.a)(t,2),i=n[0],c=n[1];return r.a.createElement(p.a,{style:P.formContainer},r.a.createElement("p",{style:P.p},"Select a start date for your plan:"),r.a.createElement(R.a,{selected:i,onChange:function(t){return function(t){c(t),e.handleChange(t)}(t)},updateTimeBoxes:e.updateTimeBoxes}),r.a.createElement(A,{text:"Next",onClick:function(t){!function(t){t.preventDefault(),e.nextStep()}(t)}}))}var P={p:{textAlign:"center",color:"white"},formContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"400px"}},U=n(51),_=n.n(U),F=n(232),z=n(233);function Y(e){var t=Object(a.useState)(e.startTime),n=Object(u.a)(t,2),i=n[0],c=n[1],o=Object(a.useState)(e.endTime),l=Object(u.a)(o,2),s=l[0],m=l[1];return Object(a.useEffect)((function(){c(e.planTimes[e.dayIndex][e.timeIndex][0]),m(e.planTimes[e.dayIndex][e.timeIndex][1])}),[e.planTimes,e.dayIndex,e.timeIndex]),r.a.createElement(p.a,{style:G.timeContainer},r.a.createElement(R.a,{selected:i,onChange:function(t){return function(t){e.updateTimeBoxes(e.dayIndex,e.timeIndex,t,0),c(t)}(t)},showTimeSelect:!0,showTimeSelectOnly:!0,timeIntervals:15,timeCaption:"Time",dateFormat:"h:mm aa"}),r.a.createElement("h5",{style:{color:"black",margin:"10px"}},"to"),r.a.createElement(R.a,{selected:s,onChange:function(t){return function(t){e.updateTimeBoxes(e.dayIndex,e.timeIndex,t,1),m(t)}(t)},showTimeSelect:!0,showTimeSelectOnly:!0,timeIntervals:15,timeCaption:"Time",dateFormat:"h:mm aa"}))}var G={timeContainer:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"}};function V(e){var t=e.planTimes[e.step],n=t.map((function(n,a){return r.a.createElement(Y,{startTime:t[a][0],endTime:t[a][1],dayIndex:e.step,timeIndex:a,planTimes:e.planTimes,updateTimeBoxes:e.updateTimeBoxes})}));return r.a.createElement(p.a,{style:W.formContainer},r.a.createElement(p.a,{style:W.topContainer},0===e.step?r.a.createElement(f.a,{style:W.iconButton,variant:"link"},r.a.createElement(F.a,{style:{opacity:0}})):r.a.createElement(f.a,{style:W.iconButton,variant:"link"},r.a.createElement(F.a,{style:W.iconLeft,onClick:e.prevDayStep})),r.a.createElement("p",{style:W.pNoBottom},_()(e.date).format("dddd,  LL")),6===e.step?r.a.createElement(f.a,{style:W.iconButton,variant:"link"},r.a.createElement(z.a,{style:{opacity:0}})):r.a.createElement(f.a,{style:W.iconButton,variant:"link"},r.a.createElement(z.a,{style:W.iconRight,onClick:e.nextStep}))),n,r.a.createElement(f.a,{style:W.iconButton,variant:"link",onClick:function(){e.addTimeBox(e.step)}},r.a.createElement("h5",null,"+")))}var W={pNoBottom:{textAlign:"center",color:"black",margin:"0",fontWeight:"bold"},formContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},iconButton:{color:"black",textDecoration:"none"},iconLeft:{margin:"10px",fontSize:"20px",width:"20px"},iconRight:{margin:"10px",fontSize:"20px",width:"20px"},topContainer:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"}};function H(e){var t=Object(a.useState)(0),n=Object(u.a)(t,2),i=n[0],c=n[1],o=function(){c(i+=1)},l=function(){c(i-=1)};return r.a.createElement(p.a,{style:K.formContainer},r.a.createElement("p",{style:K.p},"Select the times you are available to cook for each day of your plan:"),function(){switch(i){case 0:return r.a.createElement(V,{nextStep:function(){return o()},date:e.planDates[i],planTimes:e.planTimes,addTimeBox:e.addTimeBox,updateTimeBoxes:e.updateTimeBoxes,step:i});case 1:return r.a.createElement(V,{nextStep:function(){return o()},prevDayStep:function(){return l()},prevStep:function(){return e.prevStep()},date:e.planDates[i],planTimes:e.planTimes,addTimeBox:e.addTimeBox,updateTimeBoxes:e.updateTimeBoxes,step:i});case 2:case 3:case 4:case 5:return r.a.createElement(V,{nextStep:function(){return o()},prevDayStep:function(){return l()},date:e.planDates[i],planTimes:e.planTimes,addTimeBox:e.addTimeBox,updateTimeBoxes:e.updateTimeBoxes,step:i});case 6:return r.a.createElement(V,{prevDayStep:function(){return l()},date:e.planDates[i],planTimes:e.planTimes,addTimeBox:e.addTimeBox,updateTimeBoxes:e.updateTimeBoxes,step:i});default:return r.a.createElement(V,{nextStep:function(){return o()},date:e.planDates[i],planTimes:e.planTimes,addTimeBox:e.addTimeBox,updateTimeBoxes:e.updateTimeBoxes,step:i})}}(),r.a.createElement(A,{text:"Back",onClick:function(){e.prevStep()}}),r.a.createElement(A,{text:"Next",onClick:function(t){!function(t){t.preventDefault(),e.nextStep()}(t)}}))}var K={p:{textAlign:"center",color:"white"},pNoBottom:{textAlign:"center",color:"black",margin:"0",fontWeight:"bold"},formContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"400px"},iconButton:{color:"black",textDecoration:"none"},iconLeft:{margin:"10px",fontSize:"20px"},iconRight:{margin:"10px",fontSize:"20px"}},Q=n(40),$=n(120);function q(e){var t=function(t){e.cuisines.indexOf(t)<0?(console.log("CUISINE IN FUNCTION: ",t),e.addNewCuisine(t)):console.log("CUISINE ALREADY IN ARRAY")};return r.a.createElement(p.a,{style:X.formContainer},r.a.createElement("p",{style:X.p},"First, lets pick the recipes you'd like to cook throughout the week."),r.a.createElement("p",{style:X.p},"Select the types of cuisine you'd like to search:"),r.a.createElement(p.a,{style:X.innerContainer},r.a.createElement(p.a,{style:X.innerInnerContainer},r.a.createElement(Q.a,null,r.a.createElement(Q.a.Toggle,{variant:"success",id:"dropdown-basic",style:X.dropdown},"Cuisines"),r.a.createElement(Q.a.Menu,null,$.a.map((function(e){return r.a.createElement(Q.a.Item,{onClick:function(){return t(e)}},e)}))))),r.a.createElement(p.a,{style:X.innerInnerContainer},e.cuisines.map((function(e){return r.a.createElement(A,{text:e})})))),r.a.createElement(A,{text:"Back",onClick:function(){e.prevStep()}}),r.a.createElement(A,{text:"Next",onClick:function(t){!function(t){t.preventDefault(),e.nextStep()}(t)}}))}var X={p:{textAlign:"center",color:"white"},formContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"400px"},innerContainer:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"},innerInnerContainer:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",width:"50%",margin:"0",padding:"0"},dropdown:{width:"200px"}},Z=n(92);function ee(e){var t=function(t){e.diets.indexOf(t)<0?e.addNewDiet(t):console.log("DIET ALREADY IN ARRAY")},n=function(t){e.intolerances.indexOf(t)<0?e.addNewIntolerance(t):console.log("RESTRICTION ALREADY IN ARRAY")};return r.a.createElement(p.a,{style:te.formContainer},r.a.createElement("p",{style:te.p},"Select the dietary restrictions you'd like your plan to follow:"),r.a.createElement(p.a,{style:te.innerContainer},r.a.createElement(p.a,{style:te.innerContainerDropdown},r.a.createElement(Q.a,null,r.a.createElement(Q.a.Toggle,{variant:"success",id:"dropdown-basic",style:te.dropdown},"Diets"),r.a.createElement(Q.a.Menu,null,r.a.createElement(Q.a.Item,{href:"#/action-1"},"None"),r.a.createElement(Q.a.Divider,null),Z.a.map((function(e){return r.a.createElement(Q.a.Item,{onClick:function(){return t(e)}},e)})))),r.a.createElement(Q.a,null,r.a.createElement(Q.a.Toggle,{variant:"success",id:"dropdown-basic",style:te.dropdown},"Intolerances"),r.a.createElement(Q.a.Menu,null,r.a.createElement(Q.a.Item,{href:"#/action-1"},"None"),r.a.createElement(Q.a.Divider,null),Z.b.map((function(e){return r.a.createElement(Q.a.Item,{onClick:function(){return n(e)}},e)}))))),r.a.createElement(p.a,{style:te.innerContainerButtons},e.intolerances.map((function(e){return r.a.createElement(A,{text:"".concat(e,"-free")})})),e.diets.map((function(e){return r.a.createElement(A,{text:e})})))),r.a.createElement(A,{text:"Back",onClick:function(){e.prevStep()}}),r.a.createElement(A,{text:"Next",onClick:function(t){e.nextStep(t)}}))}var te={p:{textAlign:"center",color:"white"},formContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"400px"},innerContainer:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"},innerContainerDropdown:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"50%",margin:"0",padding:"0"},innerContainerButtons:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",width:"50%",margin:"0",padding:"0"},dropdown:{width:"200px",margin:"10px"}},ne=n(237);function ae(e){var t=Object(a.useState)([]),n=Object(u.a)(t,2),i=n[0],c=n[1],o=Object(a.useState)(1),l=Object(u.a)(o,2),s=l[0],m=l[1],d=Object(a.useState)(0),g=Object(u.a)(d,2),h=g[0],x=g[1],y=function(t){console.log("our recipe details: ",t.target.getAttribute("recipedetails")),e.addNewRecipe(JSON.parse(t.target.getAttribute("recipedetails"))),t.target.setAttribute("disabled",!0)};return Object(a.useEffect)((function(){(function(e,t,n,a){console.log("CUISINES IN REQUEST: ",e);var r=e.join(","),i=t.join(","),c=n.join(",");return b.get("",{params:{apiKey:"10fd6276ba57493797da32beaf541d00",cuisine:r,intolerances:i,diet:c,number:2,offset:a,sort:"popularity",addRecipeInformation:!0,fillIngredients:!0}})})(e.cuisines,e.intolerances,e.diets,h).then((function(e){console.log("results from search: ",e.data.results),c(e.data.results)}))}),[s]),r.a.createElement(p.a,{style:re.formContainer},r.a.createElement("p",{style:re.p},"These are some recipes that fit what you're looking for. "),r.a.createElement("br",null),r.a.createElement("p",{style:re.p},"This is where you can add the recipes you'd like to cook to your final prep plan!"),r.a.createElement(p.a,{style:re.cardContainer},i.map((function(e){return r.a.createElement(ne.a,{style:re.recipeCard,key:e.id},r.a.createElement(ne.a.Img,{variant:"top",src:e.image}),r.a.createElement(ne.a.Body,null,r.a.createElement(ne.a.Title,null,e.title),r.a.createElement(ne.a.Text,null,"Cuisines: ",e.cuisines.join(", ")),r.a.createElement(ne.a.Text,null,"Total Time: ",e.readyInMinutes," minutes"),r.a.createElement(ne.a.Text,null,r.a.createElement("a",{href:e.sourceUrl,target:"_blank",rel:"noopener noreferrer"},"Link to Recipe")),r.a.createElement(f.a,{variant:"primary",recipedetails:JSON.stringify(e),onClick:function(e){return y(e)}},"Add to Plan")))}))),r.a.createElement(p.a,{style:re.buttonsContainer},h>0&&r.a.createElement(A,{text:"Previous",onClick:function(e){x(h-12),m(s-1)}}),r.a.createElement(A,{text:"Next",onClick:function(e){x(h+12),m(s+1)}})),r.a.createElement(A,{text:"Finalize Plan",onClick:function(){e.handleFormSubmit()}}))}var re={p:{textAlign:"center",color:"white"},formContainer:{display:"flex",marginTop:"100px",flexDirection:"column",alignItems:"center",justifyContent:"center",overflow:"auto",height:"auto"},cardContainer:{display:"flex","flex-wrap":"wrap",flexDirection:"row",alignItems:"center",justifyContent:"space-between",overflow:"auto",height:"auto"},buttonsContainer:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"},recipeCard:{padding:"10px",margin:"10px",width:"300px"}};function ie(e,t,n,a,r,i,c,o,l,s){return w.post("/add_recipes",{recipeTitle:e,recipeImage:t,recipeLink:n,recipeCuisines:JSON.stringify(a),recipeCookTime:r,recipePrepTime:i,recipeTotalTime:c,recipeServings:o,recipeIngredients:JSON.stringify(l),recipeSteps:JSON.stringify(s)}).then((function(e){return{success:!0,message:"Successfully added new recipe",data:e.data}})).catch((function(e){return{success:!1,message:e,data:e}}))}var ce=n(14);function oe(){var e=Object(a.useState)(1),t=Object(u.a)(e,2),n=t[0],i=t[1],c=Object(a.useState)(new Date),o=Object(u.a)(c,2),m=o[0],d=o[1],f=Object(a.useState)([]),g=Object(u.a)(f,2),h=g[0],y=g[1],E=Object(a.useState)([]),b=Object(u.a)(E,2),v=b[0],w=b[1],S=Object(a.useState)([]),O=Object(u.a)(S,2),j=O[0],k=O[1],D=Object(a.useState)([]),T=Object(u.a)(D,2),I=T[0],L=T[1],R=Object(a.useState)([]),A=Object(u.a)(R,2),J=A[0],P=A[1],U=Object(a.useState)([]),F=Object(u.a)(U,2),z=F[0],Y=F[1],G=Object(a.useContext)(x),V=Object(ce.k)(),W=function(){if(1===n){for(var e=m,t=_()(m,"YYYY-MM-DD"),a=_()(t).add(7,"days"),r=[],c=[];t<a;){r.push(t.format("YYYY-MM-DD")),t=_()(t).add(1,"days"),c.push([[e,e]])}y(r),w(c)}i(n+=1)},K=function(){var e;console.log("submitting form...");for(var t,n,a,r,i,c,o,u={},p=0;p<v.length;p++){u[p]={};var d,f=v[p],g=Object(N.a)(f);try{for(g.s();!(d=g.n()).done;){var x=d.value;u[p][x[0].toString()]=x[1].toString()}}catch(y){g.e(y)}finally{g.f()}}(t=G.user,n=m,a=h,r=u,i=j,c=I,o=J,C.post("/create_plan",{userId:t,startDate:n,planDates:JSON.stringify(a),planTimes:JSON.stringify(r),planCuisines:JSON.stringify(i),planIntolerances:JSON.stringify(c),planDiets:JSON.stringify(o)}).then((function(e){return{success:!0,message:"Successfully created new plan",data:e.data}})).catch((function(e){return{success:!1,message:e,data:e}}))).then((function(t){console.log("plan created"),e=t.data.id})).then(Object(s.a)(l.a.mark((function t(){var n,a,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=Object(N.a)(z),t.prev=1,n.s();case 3:if((a=n.n()).done){t.next=9;break}return r=a.value,t.next=7,ie(r.title,r.image,r.sourceUrl,r.cuisines,r.cookingMinutes,r.preparationMinutes,r.readyInMinutes,r.servings,r.extendedIngredients,r.analyzedInstructions).then(function(){var t=Object(s.a)(l.a.mark((function t(n){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={planId:e,recipeId:n.data.id},t.next=3,r=a,C.post("/plan_recipes",{data:r}).then((function(e){return{success:!0,message:"Successfully created new plan",data:e.data}})).catch((function(e){return{success:!1,message:e,data:e}}));case 3:case"end":return t.stop()}var r}),t)})));return function(e){return t.apply(this,arguments)}}());case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),n.e(t.t0);case 14:return t.prev=14,n.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[1,11,14,17]])})))).then((function(){V.push("/single_plan/"+e)}))},Q=function(){i(n-=1)},$=function(){var e=Object(s.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:1===n&&d(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(s.a)(l.a.mark((function e(t){var n,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(B.a)(v),a=m,(r=n[t]).push([a,a]),n[t]=r,e.next=7,w(n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=Object(s.a)(l.a.mark((function e(t,n,a,r){var i,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(B.a)(v),i[t][n][r],c=a,i[t][n][r]=c,e.next=6,w(i);case 6:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),te=function(){var e=Object(s.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Object(B.a)(j)).push(t),e.next=4,k(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ne=function(){var e=Object(s.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Object(B.a)(I)).push(t),e.next=4,L(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re=function(){var e=Object(s.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Object(B.a)(J)).push(t),e.next=4,P(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),oe=function(){var e=Object(s.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Object(B.a)(z)).push(t),e.next=4,Y(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){console.log("beginning date of our plan (stored): ",m),console.log("list of days for our plan (stored): ",h),console.log("list of TIMES for our plan (stored): ",v),console.log("current step: ",n),console.log("OUR CUISINES (MOST RECENT): ",j),console.log("OUR Intoleranecs (MOST RECENT): ",I),console.log("OUR Diets (MOST RECENT): ",J),console.log("OUR RECIPES (by ID)): ",z)}));return r.a.createElement(p.a,{style:le.contentContainer},function(){switch(n){case 1:return r.a.createElement(M,{nextStep:function(){return W()},handleChange:function(e){return $(e)}});case 2:return r.a.createElement(H,{startDate:m,planDates:h,planTimes:v,addTimeBox:X,updateTimeBoxes:function(e,t,n,a){return Z(e,t,n,a)},nextStep:function(){return W()},prevStep:function(){return Q()},handleChange:function(e){return $(e)}});case 3:return r.a.createElement(q,{cuisines:j,addNewCuisine:function(e){return te(e)},nextStep:function(){return W()},prevStep:function(){return Q()},handleChange:function(){return $()}});case 4:return r.a.createElement(ee,{diets:J,intolerances:I,addNewIntolerance:function(e){return ne(e)},addNewDiet:function(e){return re(e)},nextStep:function(){return W()},prevStep:function(){return Q()},handleChange:function(){return $()}});case 5:return r.a.createElement(ae,{cuisines:j,intolerances:I,diets:J,addNewRecipe:function(e){return oe(e)},prevStep:function(){return Q()},handleFormSubmit:function(){return K()},handleChange:function(){return $()}});default:return r.a.createElement(M,{nextStep:function(){return W()},handleChange:function(e){return $(e)}})}}())}var le={p:{color:"black"},contentContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"auto",marginBottom:"200px",overflow:"auto"}},se=n(93),ue=n(75),pe=n(49),me=n(77);function de(e){return r.a.createElement(ue.a,{plugins:[pe.b,me.a],initialView:"timeGrid",visibleRange:{start:e.startDate,end:e.endDate},headerToolbar:{left:"",center:"title",right:""},events:e.events,allDaySlot:!1,slotMinTime:"05:00:00"})}Date.prototype.addDays=function(e){var t=new Date(this.valueOf());return t.setDate(t.getDate()+e),t};var fe=function(e,t){for(var n=[],a=t.map((function(e){return e.recipe_title})),r=0;r<Object.keys(e).length;r++){var i=e[r];switch(r){case 0:for(var c in i)if(c!==i[c]){var o=new Date(c),l=new Date(i[c]),s=o.addDays(0),u=l.addDays(0),p={title:"Time to cook: "+a.shift()||!1,start:s,end:u};n.push(p)}break;case 1:for(var m in i)if(m!==i[m]){var d=new Date(m),f=new Date(i[m]),g=d.addDays(1),h=f.addDays(1),x={title:a.shift(),start:g,end:h};n.push(x)}break;case 2:for(var y in i)if(y!==i[y]){var E=new Date(y),b=new Date(i[y]),v=E.addDays(2),C=b.addDays(2),w={title:a.shift(),start:v,end:C};n.push(w)}break;case 3:for(var S in i)if(S!==i[S]){var O=new Date(S),j=new Date(i[S]),k=O.addDays(3),D=j.addDays(3),T={title:a.shift(),start:k,end:D};n.push(T)}break;case 4:for(var I in i)if(I!==i[I]){var B=new Date(I),N=new Date(i[I]),L=B.addDays(4),R=N.addDays(4),A={title:a.shift(),start:L,end:R};n.push(A)}break;case 5:for(var J in i)if(J!==i[J]){var M=new Date(J),P=new Date(i[J]),U=M.addDays(5),_=P.addDays(5),F={title:a.shift(),start:U,end:_};n.push(F)}break;case 6:for(var z in i)if(z!==i[z]){var Y=new Date(z),G=new Date(i[z]),V=Y.addDays(6),W=G.addDays(6),H={title:a.shift(),start:V,end:W};n.push(H)}break;case 7:for(var K in i)if(K!==i[K]){var Q=new Date(K),$=new Date(i[K]),q=Q.addDays(7),X=$.addDays(7),Z={title:a.shift(),start:q,end:X};n.push(Z)}}}return n};function ge(){var e=Object(a.useState)(!1),t=Object(u.a)(e,2),n=t[0],i=t[1],c=Object(a.useState)(null),o=Object(u.a)(c,2),m=o[0],d=o[1],f=Object(ce.m)().planId,g=function(){var e=Object(s.a)(l.a.mark((function e(t){var n,a,r,c,o,s,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(m.ingredients.length>0)){e.next=2;break}return e.abrupt("return");case 2:n=new Set,a=Object(N.a)(t);try{for(a.s();!(r=a.n()).done;){c=r.value,o=Object(N.a)(JSON.parse(c.recipe_ingredients));try{for(o.s();!(s=o.n()).done;)u=s.value,n.add(u.name)}catch(l){o.e(l)}finally{o.f()}}}catch(l){a.e(l)}finally{a.f()}return e.next=7,d(Object(se.a)(Object(se.a)({},m),{},{ingredients:Array.from(n)}));case 7:i(!0);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){var e;(e=f,C.get("/single_plan/"+e).then((function(e){return{success:!0,message:"Found plan by ID",data:e.data}})).catch((function(e){return{success:!1,message:e,data:e}}))).then((function(e){d({id:e.data.id,planCuisines:JSON.parse(e.data.planCuisines),planDates:JSON.parse(e.data.planDates),planTimes:JSON.parse(e.data.planTimes),recipes:e.data.recipes,ingredients:[]})}))}),[]),Object(a.useEffect)((function(){null!==m&&g(m.recipes)}),[m]),n&&m?r.a.createElement(p.a,{style:he.formContainer},r.a.createElement("h2",{style:he.planHeader},"Meal Plan #",m.id),fe(m.planTimes,m.recipes).length>0?r.a.createElement(p.a,{style:he.calendarContainer},r.a.createElement(de,{startDate:m.planDates[0],endDate:new Date(m.planDates[6]).addDays(1),events:fe(m.planTimes,m.recipes)})):null,r.a.createElement(p.a,{style:he.contentContainer},r.a.createElement(p.a,{style:he.outerCardContainer},r.a.createElement("h3",{style:he.cardHeader},"This week's recipes"),r.a.createElement(p.a,{style:he.innerCardContainer},m.recipes.map((function(e,t){return r.a.createElement(ne.a,{style:he.recipeCard,key:t},r.a.createElement(ne.a.Img,{variant:"top",src:e.recipe_image}),r.a.createElement(ne.a.Body,null,r.a.createElement(ne.a.Title,null,e.recipe_title),r.a.createElement(ne.a.Text,null,"Cuisines: ",JSON.parse(e.recipe_cuisines).join(", ")),r.a.createElement(ne.a.Text,null,"Total Time: ",e.recipe_total_time," minutes"),r.a.createElement(ne.a.Text,null,r.a.createElement("a",{href:e.recipe_link,target:"_blank",rel:"noopener noreferrer"},"Link to Recipe"))))})))),r.a.createElement(ne.a,null,r.a.createElement(ne.a.Body,null,r.a.createElement(ne.a.Title,null,"Shopping List"),m.ingredients.length>0?m.ingredients.map((function(e,t){return r.a.createElement("p",{key:t},e)})):r.a.createElement("p",null,"Ingredients Not Found"))))):r.a.createElement(p.a,{style:he.formContainer},r.a.createElement("p",null,"loading plan data"))}var he={p:{textAlign:"center",color:"white"},formContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"#5D737E",opacity:".90",padding:"40px 10px",paddingBottom:"20px",paddingTop:"20px"},calendarContainer:{margin:"10px",padding:"10px",background:"rgb(136, 162, 170)",opacity:".90"},contentContainer:{display:"flex"},recipeCard:{padding:"10px",margin:"10px",width:"40%"},outerCardContainer:{display:"flex",flexWrap:"wrap",justifyContent:"center",height:"5%"},innerCardContainer:{display:"flex","flex-wrap":"wrap",flexDirection:"row",justifyContent:"space-around",overflow:"auto"},cardHeader:{background:"#BB342F",opacity:".90",padding:"5px 10px",display:"inline-block",borderRadius:"25px",margin:"0px",color:"white"},planHeader:{background:"#BB342F",opacity:".90",padding:"5px 10px",display:"inline-block",borderRadius:"25px",marginBottom:"20px",color:"white",textAlign:"center"},headerStyle:{margin:"0px","text-align":"center"}};function xe(){return r.a.createElement(ue.a,{plugins:[pe.b,me.a],initialView:"timeGrid",visibleRange:{start:"2020-01-01",end:"2020-01-08"},headerToolbar:{left:"",center:"title",right:""}})}function ye(){var e=Object(a.useState)(null),t=Object(u.a)(e,2),n=t[0],i=t[1],c=Object(a.useContext)(x);return Object(a.useEffect)((function(){var e;(e=c.user,C.get("/all_plans/"+e).then((function(e){return{success:!0,message:"Found all plans for current user",data:e.data}})).catch((function(e){return{success:!1,message:e,data:e}}))).then((function(e){console.log("response from all plans search: ",e),0===e.data.length?i(!1):i(e.data)}))}),[]),null===n?r.a.createElement(p.a,{style:Ee.formContainer},r.a.createElement("p",null,"loading user plans")):!1===n?r.a.createElement(p.a,{style:Ee.formContainer},r.a.createElement("p",null,"No plans for current user. Create one now!")):r.a.createElement(p.a,{style:Ee.formContainer},r.a.createElement("p",{style:Ee.p},"Here is where you can view all plans you have created"),n.map((function(e,t){return r.a.createElement(D.NavLink,{to:"/single_plan/"+e.id},r.a.createElement("p",{key:t},"View Details for plan ",e.id,", from ",JSON.parse(e.planDates)[0]," to ",JSON.parse(e.planDates)[6]))})))}var Ee={p:{textAlign:"center",color:"white"},formContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"400px"}},be=n(234);function ve(e){var t=Object(a.useState)(!1),n=Object(u.a)(t,2),i=n[0],c=n[1],o=Object(a.useState)(""),m=Object(u.a)(o,2),d=m[0],g=m[1],h=Object(a.useState)(""),y=Object(u.a)(h,2),E=y[0],b=y[1],C=Object(a.useContext)(x);return i?r.a.createElement(ce.c,{to:{from:{pathname:"/"}}}):C.loggedIn?r.a.createElement(ce.c,{to:"/"}):r.a.createElement(p.a,{className:"Login",style:Ce.formContainer},r.a.createElement(be.a,{onSubmit:function(e){e.preventDefault(),function(e,t){return v.post("/login",{username:e,password:t}).then((function(e){return{success:!0,message:"Successful Login",data:e.data}})).catch((function(e){return{success:!1,message:e,data:e}}))}(d,E).then(function(){var e=Object(s.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.success){e.next=4;break}alert("Login has failed. Recheck your credentials"),e.next=8;break;case 4:return console.log("Logging in."),e.next=7,C.handleLogin(t);case 7:c(!0);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},r.a.createElement(be.a.Group,{controlId:"email",bssize:"large"},r.a.createElement(be.a.Label,null,"Email"),r.a.createElement(be.a.Control,{autoFocus:!0,type:"email",value:d,onChange:function(e){return g(e.target.value)}})),r.a.createElement(be.a.Group,{controlId:"password",bssize:"large"},r.a.createElement(be.a.Label,null,"Password"),r.a.createElement(be.a.Control,{value:E,onChange:function(e){return b(e.target.value)},type:"password"})),r.a.createElement(f.a,{block:!0,bssize:"large",disabled:!(d.length>0&&E.length>0),type:"submit"},"Login")))}var Ce={p:{textAlign:"center",color:"white"},formContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"400px"}};function we(e){var t=Object(a.useState)(!1),n=Object(u.a)(t,2),i=n[0],c=n[1],o=Object(a.useState)(""),m=Object(u.a)(o,2),d=m[0],g=m[1],h=Object(a.useState)(""),y=Object(u.a)(h,2),E=y[0],b=y[1],C=Object(a.useState)(""),w=Object(u.a)(C,2),S=w[0],O=w[1],j=Object(a.useContext)(x);return i?r.a.createElement(ce.c,{to:{from:{pathname:"/"}}}):j.loggedIn?r.a.createElement(ce.c,{to:"/"}):r.a.createElement(p.a,{className:"Signup",style:Se.formContainer},r.a.createElement(be.a,{onSubmit:function(e){if(e.preventDefault(),E!==S)return alert("passwords must match"),b(""),O(""),!1;(function(e,t){return v.post("/signup",{username:e,password:t}).then((function(e){return{success:!0,message:"Successful Signup",data:e.data}})).catch((function(e){return{success:!1,message:e,data:e}}))})(d,E).then(function(){var e=Object(s.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.success){e.next=4;break}alert("Signup has failed. Recheck your credentials"),e.next=8;break;case 4:return console.log("Signup Successful -> Logging in."),e.next=7,j.handleLogin(t);case 7:c(!0);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},r.a.createElement(be.a.Group,{controlId:"email",bssize:"large"},r.a.createElement(be.a.Label,null,"Email"),r.a.createElement(be.a.Control,{autoFocus:!0,type:"email",value:d,onChange:function(e){return g(e.target.value)}})),r.a.createElement(be.a.Group,{bssize:"large"},r.a.createElement(be.a.Label,null,"Password"),r.a.createElement(be.a.Control,{value:E,onChange:function(e){return b(e.target.value)},type:"password"}),r.a.createElement(be.a.Label,null,"Re-enter password"),r.a.createElement(be.a.Control,{value:S,onChange:function(e){return O(e.target.value)},type:"password"})),r.a.createElement(f.a,{block:!0,bssize:"large",disabled:!(d.length>0&&E.length>0),type:"submit"},"Signup")))}var Se={p:{textAlign:"center",color:"white"},formContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"400px"}};function Oe(){return r.a.createElement(p.a,{style:je.formContainer},r.a.createElement("p",{style:je.p},"This is where  USER PASSWORD"))}var je={p:{textAlign:"center",color:"white"},formContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"400px"}},ke=n(121),De=function(e){var t=e.component,n=Object(ke.a)(e,["component"]),i=Object(a.useContext)(x);return r.a.createElement(ce.d,Object.assign({},n,{render:function(e){return i.loggedIn?r.a.createElement(t,e):r.a.createElement(ce.c,{to:{pathname:"/login",state:{from:e.location}}})}}))};function Te(){var e=Object(a.useState)(!1),t=Object(u.a)(e,2),n=t[0],i=t[1],c=Object(a.useState)(null),o=Object(u.a)(c,2),m=o[0],d=o[1];Object(a.useEffect)((function(){n||(console.log("Checking session..."),v.get("/session").then((function(e){return{success:!0,message:"Valid Session",data:e.data}})).catch((function(e){return{success:!1,message:e,data:e}})).then((function(e){console.log("Response from session check: ",e),e.success?(console.log("Existing Session Detected"),i(!0),d(e.data)):console.log("user not logged in, logging out")})))}),[n]);var f=function(){var e=Object(s.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("this is the login handler: "),console.log(t),d(t.data),e.next=5,i(t.success);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(x.Provider,{value:{loggedIn:n,user:m,handleLogin:f}},r.a.createElement(D.BrowserRouter,null,r.a.createElement(p.a,null,r.a.createElement(S,null),r.a.createElement(ce.g,null,r.a.createElement(De,{exact:!0,path:"/",component:T}),r.a.createElement(De,{path:"/all",component:ye}),r.a.createElement(De,{path:"/create",component:oe}),r.a.createElement(De,{path:"/single_plan/:planId",component:ge}),r.a.createElement(ce.d,{exact:!0,path:"/login",component:ve}),r.a.createElement(ce.d,{exact:!0,path:"/signup",component:we}),r.a.createElement(ce.d,{path:"/password",component:Oe}),r.a.createElement(ce.d,{path:"/sample",component:xe})))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(219);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Te,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},92:function(e){e.exports=JSON.parse('{"b":["Dairy","Egg","Gluten","Grain","Peanut","Seafood","Sesame","Shellfish","Soy","Sulfite","Tree Nut","Wheat"],"a":["Gluten-free","Ketogenic","Vegetarian","Lacto-Vegetarian","Ovo-Vegetarian","Vegan","Pescetarian","Paleo","Primal","Whole30"]}')}},[[125,1,2]]]);
//# sourceMappingURL=main.d7baa7c6.chunk.js.map